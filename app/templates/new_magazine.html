{% extends 'base.html' %}

{% block content %}
<div class="card">
  <h5 class="card-header">Add a Magazine</h5>
  <div class="card-body">
    {% with messages = get_flashed_messages(with_categories = true) %}
    <form action="/magazines" method="post">
      <input type="hidden" name="user_id" value="{{ session.user_id }}">
      <div class="mb-3">
        <label for="title" class="form-label">Title:</label>
        <input type="text" name="title" id="title" class="form-control">
        {% if messages %}
          {% for category, message in messages %}
            {% if category == 'title' %}
              <span class="form-text text-danger">{{ message }}</span>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
      <div class="mb-3">
        <label for="description" class="form-label">Description:</label>
        <textarea name="description" id="description" class="form-control"></textarea>
        {% if messages %}
          {% for category, message in messages %}
            {% if category == 'description' %}
              <span class="form-text text-danger">{{ message }}</span>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
      <div class="d-flex justify-content-end">
        <input type="submit" value="Add Magazine" class="btn btn-primary">
      </div>
    </form>
    {% endwith %}
  </div>
</div>
{% endblock content %}